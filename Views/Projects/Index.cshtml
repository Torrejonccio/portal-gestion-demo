@model IEnumerable<PortalGestionInterna.Models.Project>

@{
    ViewData["Title"] = "Panel de Proyectos";
}

<header class="page-header">
    <div>
        <h1 class="page-title">Panel de proyectos</h1>
        <p class="page-subtitle">Vista de todos los proyectos activos/pendientes/completados/etc</p>
    </div>
</header>

<div class="projects-grid">
    @foreach (var item in Model)
    {
        <div class="project-card d-flex flex-column">
            <div class="p-4">
                <div class="d-flex justify-content-between align-items-start">
                    @{
                        var statusClass = "status-" + (item.Status ?? "").ToLower().Replace(" ", "-");
                    }
                    <span class="status-badge @statusClass">@item.Status</span>
                    <span class="text-secondary small">#P-@item.Id.ToString("D3")</span>
                </div>
                <h3 class="mt-3 fs-5 fw-semibold text-dark">@item.Name</h3>
                <p class="mt-2 text-secondary text-sm" style="min-height: 40px;">@item.Description</p>
            </div>
            <div class="mt-auto">
                <div class="px-4 py-3 bg-light border-top">
                    <div class="text-secondary small d-flex justify-content-between">
                        <span><strong>Inicio:</strong> @(item.StartDate?.ToString("dd/MM/yyyy") ?? "N/A")</span>
                        <span><strong>Fin:</strong> @(item.EndDate?.ToString("dd/MM/yyyy") ?? "N/A")</span>
                    </div>
                </div>

                <div class="p-3 bg-light d-flex justify-content-end gap-2">
                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-sm btn-outline-secondary">Editar</a>
                    <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-sm btn-outline-info">Detalles</a>
                    <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-sm btn-outline-danger">Eliminar</a>
                </div>
            </div>
        </div>
    }

    <a asp-action="Create" class="project-card project-card-new text-decoration-none">
        <div class="text-center p-5">
            <svg class="mx-auto" style="height: 3rem; width: 3rem;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg>
            <span class="mt-2 d-block fw-semibold">AÃ±adir nuevo proyecto</span>
        </div>
    </a>
</div>
